<!DOCTYPE html>
<html lang="en">
<head>
<meta name="naver-site-verification" content="907309a9759c57d67cd81f19709282c0a72d3211" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017"
     crossorigin="anonymous"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F00NF909N7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-F00NF909N7');
</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Text Art Generator - 2048global.com/textart</title>

<!-- favicon -->
<link rel="icon" type="image/x-icon" href="/favicon.ico">

<!-- Open Graph -->
<meta name="description" content="Convert images into text art.">
<meta property="og:type" content="website">
<meta property="og:title" content="Text Art Generator - 2048global.com/textart">
<meta property="og:description" content="Convert images into text art.">
<meta property="og:site_name" content="2048global.com/textart">
<meta property="og:image" content="2048global.com/textart/preview.jpg">
<meta property="og:url" content="https://2048global.com/textart">

<style>
  :root{
    --bg:#0b0f14; --panel:#111823; --text:#e5eef7; --muted:#94a3b8; --accent:#4f9cf9; --border:#1e293b
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace
  }
  .wrap{max-width:940px;margin:0 auto;padding:16px}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:8px}
  .title{font-weight:800;font-size:18px}
  .sharebar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .panel{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px}
  .grid{display:grid;gap:12px}
  @media(min-width:960px){.grid{grid-template-columns:360px 1fr}}

  .drop{
    position:relative; /* ⬅️ 오버레이 input을 위해 추가 */
    border:2px dashed #334155;border-radius:12px;padding:18px;text-align:center;
    background:#0f172a55; cursor:pointer; user-select:none
  }
  .drop:hover{border-color:var(--accent)}
  .drop strong.underline{ text-decoration: underline; }

  /* ⬇️ 모바일용 투명 오버레이 input (PC에서는 숨김) */
  .file-overlay{
    position:absolute; inset:0;
    width:100%; height:100%;
    opacity:0; cursor:pointer;
    margin:0; padding:0; border:0;
    display:none; /* 기본은 PC에서 숨김 */
  }

  .hint{color:var(--muted);font-size:12px}
  .notice{margin-top:10px;padding:10px;border:1px dashed #2b3b55;border-radius:10px;background:#0f172a88}

  .control{
    display:flex; flex-direction:column; gap:8px;
    margin:12px 0; padding:10px; border:1px solid var(--border); border-radius:10px; background:#0f172a66
  }
  .control label{font-size:12px;color:var(--muted)}
  .control input[type="range"], .control select, .control input[type="color"], .control input[type="text"]{width:100%}

  .btns{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
  button{
    background:#1e293b;color:#dbeafe;border:1px solid #2b3b55;
    padding:11px 14px;border-radius:10px;font-weight:700;cursor:pointer
  }
  button.primary{background:linear-gradient(180deg,#3b82f6,#2563eb);color:#fff}
  button:disabled{opacity:.55;cursor:not-allowed}
  .iconbtn{display:inline-flex;align-items:center;gap:6px}

  pre#ascii{
    margin:0; white-space:pre; overflow:auto; background:#000; color:#fff;
    padding:12px; border-radius:12px; line-height:1em; min-height:200px
  }

  .msg-below{
    margin-top:6px;
    text-align:right;
    font-weight:700;
    color:#fff;
    white-space:pre;
  }

  @media(max-width:480px){
    .control{margin:10px 0; padding:10px}
    .btns{gap:10px}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="title">🔤 Text Art Generator</div>
    <div class="sharebar">
      <button id="shareSite" class="iconbtn">📤 Share with Friends</button>
    </div>
  </header>

  <div class="grid">
    <div class="panel">
      <!-- ⛔️ 기존: 숨김 input (삭제) -->
      <!-- <input id="file" type="file" accept="image/*" style="display:none"> -->

      <!-- ✅ 드롭존 + 모바일용 투명 오버레이 input -->
      <div class="drop" id="drop" role="button" tabindex="0" aria-label="Drop or tap to upload an image">
        <div><strong>Drop image</strong> or <strong class="underline">Tap here to upload</strong></div>
        <div class="hint">You can also paste from clipboard</div>
        <input id="file" type="file" accept="image/*" class="file-overlay"><!-- 모바일에서만 표시 -->
      </div>

      <div class="notice">💡 <strong>Save as image for best results.</strong> In messengers like KakaoTalk, fonts may not align. Under 50 columns is recommended on mobile.</div>

      <div class="control">
        <label>Output Width: <span id="wVal">50</span> cols</label>
        <input id="width" type="range" min="30" max="300" value="50">
      </div>

      <div class="control">
        <label>Font Size: <span id="fsVal">12</span>px</label>
        <input id="fontsize" type="range" min="8" max="20" value="12">
      </div>

      <div class="control">
        <label for="mode">Mode</label>
        <select id="mode">
          <option value="mono" selected>Monochrome</option>
          <option value="color">Color</option>
        </select>
      </div>

      <div class="control">
        <label for="fontColor">Font Color (Monochrome)</label>
        <input id="fontColor" type="color" value="#ffffff">
      </div>

      <div class="control">
        <label for="bgColor">Background Color</label>
        <input id="bgColor" type="color" value="#000000">
      </div>

      <div class="control">
        <label for="customMsg">Message (up to 20 characters, displayed at bottom-right)</label>
        <input id="customMsg" type="text" maxlength="20" placeholder="Enter message">
      </div>

      <div class="btns">
        <button id="render" class="primary" disabled>Generate</button>
        <button id="copyBtn" class="iconbtn" disabled>📋 Copy</button>
        <button id="shareImage" disabled>Share Image</button>
        <button id="savePng" disabled>Save Image</button>
        <button id="clear">Reset</button>
      </div>
    </div>

    <div class="panel">
      <div id="preview" style="margin-bottom:8px"></div>
      <pre id="ascii"></pre>
      <div id="msgBelow" class="msg-below"></div>
    </div>
  </div>
</div>

<canvas id="canvas" style="display:none"></canvas>

<!-- ===== Upload behavior (desktop: drop+click, mobile: tap) ===== -->
<script>
(function(){
  const drop = document.getElementById('drop');
  const fileInput = document.getElementById('file');
  const preview = document.getElementById('preview');

  // 터치 디바이스 감지
  const isTouch = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);

  // 모바일(터치)에서는 투명 오버레이 input 표시 → 탭하면 네이티브 파일 선택
  // PC에서는 숨기고, 드래그&드롭 + 클릭으로 파일창 열리게 처리
  if (isTouch) {
    fileInput.style.display = 'block';
  } else {
    fileInput.style.display = 'none';
    // PC: 클릭/키보드로 파일창
    drop.addEventListener('click', () => fileInput.click());
    drop.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); fileInput.click(); }
    });
  }

  // 파일 선택 시
  fileInput.addEventListener('change', (e) => {
    const f = e.target.files && e.target.files[0];
    if (f) safeReadFile(f);
  });

  // Drag & Drop (주로 PC)
  ['dragenter','dragover'].forEach(ev =>
    drop.addEventListener(ev, e => { e.preventDefault(); e.stopPropagation(); })
  );
  drop.addEventListener('drop', e => {
    e.preventDefault(); e.stopPropagation();
    const f = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0];
    if (f) safeReadFile(f);
  });

  // Paste from clipboard (지원 브라우저)
  window.addEventListener('paste', e => {
    const items = e.clipboardData && e.clipboardData.items;
    if (!items) return;
    for (const it of items) {
      if (it.type && it.type.startsWith('image/')) {
        const f = it.getAsFile();
        if (f) { safeReadFile(f); break; }
      }
    }
  });

  // 사용자가 기존에 정의한 readFile()이 있으면 그대로 사용
  // 없으면 미니 fallback(미리보기만) 제공 → 다른 기능은 그대로 유지됨
  function safeReadFile(file){
    if (typeof window.readFile === 'function') {
      window.readFile(file);
      return;
    }
    // Minimal fallback: preview only
    const url = URL.createObjectURL(file);
    const img = new Image();
    img.onload = () => {
      preview.innerHTML = `<img src="${url}" style="max-width:100%;border-radius:8px;border:1px solid #1e293b">`;
      // 버튼 활성화 등은 기존 스크립트가 처리하도록 둠
    };
    img.onerror = () => alert('Failed to load image.');
    img.src = url;
  }
})();
</script>

<a href="https://2048global.com" style="color:white;" target="_blank" rel="noopener noreferrer">
  2048global Home
</a>
</body>
</html>
